{% extends 'layout/base.html' %}
{% load static %}
{% load template_filters %} <!-- Added spaces for consistency -->
{% block scripts %}
    {{ block.super }}
    <script type="module" src="{% static 'js/public/select-mailing.js' %}" defer></script>
{% endblock %}

{% block content %}
    {% csrf_token %}
    <div class="wrapper__mailings">
    <div class="wrapper__left">
        {% block section %}
            {% include '../components/_navbar.html' %}
        {% endblock %}
        <div class="wrapper__left--titles">
            <p class="wrapper__left--text">Filter by</p>
                <select id ="filter-type" class="wrapper__left--select">
                    <option default></option>
                    <option>Tag</option>
                    <option>User</option>
                </select>
            <p>
                <input id ="tag_input" class ="wrapper__left--input filters hide" type="text" placeholder="Enter tags to filter">
                <input id ="user_input" class ="wrapper__left--input filters hide" type="text" placeholder="Enter user to filter">
            </p>
            <p>
                <button class = "wrapper__left--button" id ="filter-btn">Filter</button>
            </p>
        </div>
        <a class="logo_wrapper" href="https://colorofchange.org">
            <img class="logo" src="{% static 'images/logo.png' %}"/>
        </a>
    </div>
    <div class="wrapper__right">
        <div class="mailing_list_container">
            <ul class="mailing_objs_container">
                {% for mailing in mailing_list %}
                    <li class="mailing_obj">
                        <div class="date_container">
                            <div class="styling_notch"></div>
                            <div class="date">{{ mailing.created_date }}</div>
                        </div>
                        <div class="subject_and_tags_container">
                            <div class="subject">{{ mailing }}</div>
                            <div>
                                {% for tag in mailing.tags.values %}
                                    <span class="tags">{{ tag.name }}</span>
                                {% empty %} <!-- If actual tags aren't loading here's some dummy data -->
                                    {% for i in '123'|make_list %}
                                        <span class="tags">#Tag {{ i }}</span>
                                    {% endfor %}
                                {% endfor %}
                            </div>
                        </div>
                    </li>
                {% endfor %}
                </ul>

            <nav class="page_btn_container">
                {% if mailing_list.has_previous %}
                    <a href="{% url 'mailings' %}?page={{mailing_list.previous_page_number}}" class="page_nav_btn">Previous Page</a>
                {% endif %}
                {% if mailing_list.has_next %}
                    <a href="{% url 'mailings' %}?page={{mailing_list.next_page_number}}" class="page_nav_btn">Next Page</a>
                {% endif %}
            </nav>
        </div>
    </div>
    </div>
{% endblock %}
